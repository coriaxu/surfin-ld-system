# Surfin L&D System V2 (Surfin 学习发展系统 V2)

这是一个基于 Web 的轻量级**学习发展管理系统**，专为管理培训记录、预算、以及 AI 知识库内容而设计。

## 🌟 项目简介

本项目由**若谷**（您的 AI 产品经理）接手负责，旨在为您提供一个简单、美观且功能强大的数据管理工具。无需复杂的服务器部署，只需一个 HTML 文件即可在浏览器中运行，并支持 **GitHub 云同步** 实现跨设备数据共享。

## ✨ 主要功能

系统分为四大主要模块：

### 1. 📊 培训大屏 (Dashboard)
- **核心数据概览**：实时显示本月培训场次、总人时、本月培训人数、本月所有项目支出，并新增 2026 年累计场次/人数/总人时/支出。
- **可视化图表**：
    - **培训人时趋势**：折线图展示每月的人时变化。
    - **预算 vs 开销**：柱状图对比每月的预算与实际花费。
    - **费用构成**：甜甜圈图分析常规与特殊开销的比例。
- **导出功能**：支持将当前页面导出为 **Excel** 表格、**JSON** 数据备份、**备份码（复制粘贴）** 或高通过性的 **PDF** 报告。

### 2. 👩‍🏫 培训管理 (Training Management)
- **场次记录**：详细记录每一次培训的时间、课程、项目、讲师、人数及时长。
- **自动计算**：系统会自动计算"总人时"（人数 × 时长），方便统计工作量。
- **增删改查**：可以随时添加新记录，或对已有记录进行编辑和删除。

### 3. 🤖 AI 知识库 (AI Knowledge Base)
本模块专为 AI 相关的知识分享活动设计，包含两个子版块：
- **🎙️ AI 广播站**：
    - **看板管理**：追踪每一期的制作流程（从选题到数据回收）。
    - **查看率趋势**：通过柱状图和折线图分析内容的受欢迎程度。
    - **发布热力图**：直观展示全年的内容发布密度。
    - **详情记录**：记录每期主题、查看人数、分类（新闻、工具、论文等）。
- **📅 AI 分享月**：
    - **培训执行看板**：管理线下/线上分享会的筹备进度。
    - **参与率分析**：追踪员工对分享活动的参与度。

### 4. 💰 预算与开销 (Budget & Expenses)
- **月度管理**：按月规划培训预算。
- **类型区分**：区分"常规项目"与"特殊项目"，便于财务分析。
- **实时监控**：输入实际开销后，系统自动计算剩余金额，并用颜色标识（绿色为有结余，红色为超支）。

### 5. 📚 金融小百科 (Finance Encyclopedia)
- **看板管理**：追踪每一期的制作流程。
- **拖拽操作**：支持拖拽卡片在不同阶段之间移动。
- **统计视图**：查看发布趋势和热力图。

## 🚀 如何使用

### ☁️ 云同步模式（推荐）

本项目已实现 **GitHub 云同步**，工作流程如下：

| 角色 | 操作 | 效果 |
|------|------|------|
| **管理员（徐老师）** | 配置一次 Token → 正常编辑数据 | 数据自动同步到云端 |
| **访客（付玲姐等）** | 直接打开网页 | 自动看到最新数据 |

#### 管理员首次配置步骤：

1. 创建 GitHub Token：[点击这里创建](https://github.com/settings/tokens/new?scopes=repo&description=Surfin%20LD%20System%20Sync)
2. 打开系统网页，点击顶部 **「云同步」** 按钮
3. 粘贴 Token，点击 **「保存并同步」**
4. 配置完成！以后编辑数据会自动同步到云端

#### 访客使用方式：

- **什么都不用做**，直接打开网页就能看到最新数据
- 如需查看最新更新，刷新页面即可

#### 技术原理：

- 管理员的修改会推送到 `user-data.json` 文件
- 访客打开页面时，自动从 `raw.githubusercontent.com` 拉取最新数据
- 无需每个人都配置 Token

---

## 🛠️ 技术说明
- **技术栈**：原生 HTML5, CSS3, JavaScript (ES6+)。
- **外部库**：
    - `Chart.js`: 用于生成精美的统计图表。
    - `html2canvas` & `jspdf`: 用于生成 PDF 报告。
    - `xlsx`: 用于导出 Excel 表格。
- **云同步**：通过 GitHub API 实现数据的云端存储和跨设备同步。

---

## ⚠️ 常见问题与解决 (Troubleshooting)

### Q1: 我修改了数据，但其他人看到的还是旧数据？
- 数据同步有 **几秒到 1 分钟** 的延迟（GitHub CDN 缓存）
- 让对方**刷新页面**即可获取最新数据

### Q2: 换了浏览器/设备后数据不见了？
- 如果您是管理员：重新配置 Token 即可，云端数据会自动同步下来
- 如果您是访客：直接打开网页就能看到数据，无需任何配置

### Q3: 为什么页面一片空白或数据显示不全？
这通常是 JSON 格式错误导致的，最常见的原因是**英文引号冲突**。
- **错误写法**：`"title": "港大"幽灵引用"论文撤稿"` （双引号里套双引号，会导致解析失败）
- **正确写法**：`"title": "港大'幽灵引用'论文撤稿"` （把内部的引号改成单引号）

---

## 🌟 功能更新日志

### 2025-12-27：测试数据清理
- 全面清理了系统初始的**测试数据**（包含 2024-08 的培训场次和预算记录）
- 系统现在已处于空数据状态，方便您直接开始正式使用

#### 📝 复盘：为什么删除测试数据这么费劲？

**问题现象**：若谷在代码层面删除了测试数据并推送到 GitHub，但数据总是"复活"。

**根本原因**：
1. **云同步机制的"双刃剑"**：管理员（徐老师）配置了 GitHub Token 后，浏览器会**自动同步**本地数据到云端。当若谷删除云端数据后，徐老师的浏览器 Local Storage 里还存着旧数据，一打开网页就自动把旧数据同步回去了。
2. **多浏览器使用**：徐老师同时使用 **Google Chrome** 和 **Atlas 浏览器**，每个浏览器都有独立的 Local Storage 缓存，需要分别清理。
3. **GitHub CDN 缓存延迟**：GitHub 的 raw.githubusercontent.com 有 5-10 分钟的 CDN 缓存，导致验证数据是否真正删除时产生困惑。

**解决方案**：
1. 先让管理员在浏览器的 `Application → Local Storage` 中手动删除 `surfin_ld_system_v2` 等缓存
2. 然后再推送干净的数据到 GitHub
3. **每个使用的浏览器都需要单独清理 Local Storage**

**经验教训**：
- 对于有云同步功能的系统，清理数据时必须**同时清理本地缓存和云端数据**
- 未来如需清理数据，建议直接在网页端操作删除，这样会同时更新本地和云端
- 考虑后续添加一个"重置所有数据"的管理员功能按钮

---

## 👤 用户使用习惯备忘

| 项目 | 说明 |
|------|------|
| **常用浏览器** | Google Chrome、Atlas 浏览器（可能还会用其他浏览器） |
| **角色** | 管理员（已配置 GitHub Token，具有云同步权限） |
| **注意事项** | 每个浏览器都有独立的 Local Storage，如需清理缓存需分别操作 |

---

### 2025-12-26：密码保护功能
- 新增 **访问密码保护**，只有知道密码的人才能进入系统
- 支持 **"记住我"功能**，勾选后下次自动登录，无需重复输入密码
- 密码使用 SHA-256 哈希加密存储，提供基础安全保护
- **使用说明**：
  - **访问密码**：由管理员统一分发（请妥善保管）
  - 首次访问需输入密码，勾选"记住我"后该浏览器将永久免密
  - 如需退出登录：在网址后加 `#logout` 即可清除登录状态

### 2025-12-26：GitHub 云同步
- 新增 **云同步** 功能，管理员配置 Token 后数据自动同步到 GitHub
- 访客无需配置，打开网页自动获取最新数据
- 支持跨浏览器、跨设备数据同步

### 2025-12-25：金融小百科看板
- 新增 **金融小百科** 模块，采用看板式管理
- 支持拖拽卡片在不同阶段之间移动
- 可视化滚动条，方便查看所有阶段

### 2025-12-25：AI 分享月 - 星云时光轴
- 上线了全新的**项目进度管理看板**，专为 AI 分享月设计
- **星云紫主题**：采用区别于广播站的紫色调
- **8 步时光轴**：从主题确定到数据归档的完整流程

---
**负责更迭**：本版本由**若谷**基于前期工作优化接手。如有任何使用问题或新需求，请随时呼叫若谷！🌹

